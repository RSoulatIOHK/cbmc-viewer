<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CBMC viewer</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> CBMC Viewer</a></li><li class="chapter-item expanded "><a href="installation/index.html"><strong aria-hidden="true">2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="tutorial/index.html"><strong aria-hidden="true">3.</strong> Tutorial</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> User guide</div></li><li class="chapter-item expanded "><a href="reference-manual/index.html"><strong aria-hidden="true">5.</strong> Reference manual</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Frequently asked questions</div></li><li class="chapter-item expanded "><a href="resources/index.html"><strong aria-hidden="true">7.</strong> Resources</a></li><li class="chapter-item expanded "><a href="contributing/index.html"><strong aria-hidden="true">8.</strong> Contributing</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CBMC viewer</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cbmc-viewer"><a class="header" href="#cbmc-viewer">CBMC viewer</a></h1>
<p><a href="https://github.com/diffblue/cbmc">CBMC</a> is a model checker for
C. This means that CBMC will explore all possible paths through your code
on all possible inputs, and will check that all assertions in your code are
true.
CBMC can also check for the possibility of
memory safety errors (like buffer overflow) and for instances of
undefined behavior (like signed integer overflow).
CBMC is a bounded model checker, however, which means that using CBMC may
require restricting this set of all possible inputs to inputs of some
bounded size.</p>
<p><a href="https://github.com/model-checking/cbmc-viewer">CBMC Viewer</a> is a tool
that scans the output of CBMC and produces a browsable summary of its findings.</p>
<ul>
<li><a href="installation">Installation</a></li>
<li><a href="tutorial">Tutorial</a></li>
<li><a href="">User guide</a></li>
<li><a href="reference-manual">Reference manual</a></li>
<li><a href="">Frequently asked questions</a></li>
<li><a href="resources">Resources</a></li>
<li><a href="contributing">Contributing</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="brew-installation"><a class="header" href="#brew-installation">Brew installation</a></h2>
<p>On MacOS, we recommend installing with <a href="https://brew.sh/">brew</a>.
Install with</p>
<pre><code>  brew tap aws/tap
  brew install cbmc-viewer universal-ctags
</code></pre>
<p>and upgrade to the latest version with</p>
<pre><code>  brew upgrade cbmc-viewer
</code></pre>
<p>The <a href="https://brew.sh/">brew home page</a> gives instructions for installing brew.
The command <code>brew tap aws/tap</code> taps the AWS repository that contains the
brew package.
Installing <code>ctags</code> is optional, <a href="installation/index.html#installation-notes">see below</a>.</p>
<h2 id="pip-installation"><a class="header" href="#pip-installation">Pip installation</a></h2>
<p>On all machines, you can install with <a href="https://pypi.org/project/pip/">pip</a>.
Install with</p>
<pre><code>  python3 -m pip install cbmc-viewer
  brew install universal-ctags
</code></pre>
<p>or</p>
<pre><code>  python3 -m pip install cbmc-viewer
  apt install universal-ctags
</code></pre>
<p>and upgrade to the latest version with</p>
<pre><code>  python3 -m pip install --upgrade cbmc-viewer
</code></pre>
<p>The <a href="https://www.python.org/downloads/">python download page</a>
gives instructions for installing python and pip.
Installing <code>ctags</code> is optional, <a href="installation/index.html#installation-notes">see below</a>.</p>
<h2 id="developers"><a class="header" href="#developers">Developers</a></h2>
<p>Developers can install the package in &quot;editable mode&quot; which makes
it possible to modify the code in the source tree and then run the command
from the command line as usual to test the changes.
First, optionally install ctags as described above.  Then</p>
<ul>
<li>
<p>Clone the repository with</p>
<pre><code>git clone https://github.com/model-checking/cbmc-viewer cbmc-viewer
</code></pre>
</li>
<li>
<p>Install into a virtual environment with</p>
<pre><code>cd cbmc-viewer
make develop
</code></pre>
<p>At this point you can either activate the virtual environment with</p>
<pre><code>source /tmp/cbmc-viewer/bin/activate
</code></pre>
<p>or simply add the virtual environment to your path with</p>
<pre><code>export PATH=$PATH:/tmp/cbmc-viewer/bin
</code></pre>
</li>
<li>
<p>Uninstall with</p>
<pre><code>cd cbmc-viewer
make undevelop
</code></pre>
</li>
</ul>
<h2 id="installation-notes"><a class="header" href="#installation-notes">Installation notes</a></h2>
<p>If you have difficulty installing these tools, please let us know by
submitting a <a href="https://github.com/model-checking/cbmc-viewer/issues">GitHub issue</a>.</p>
<p>The installation of <code>ctags</code> is optional, but without ctags, <code>cbmc-viewer</code>
will fail to link some symbols appearing in error traces to their
definitions in the source code. The ctags tool has a long history. The
<a href="https://en.wikipedia.org/wiki/Ctags">original ctags</a> was resplaced by
<a href="http://ctags.sourceforge.net/">exhuberant ctags</a> which was replaced by
<a href="https://github.com/universal-ctags/ctags">universal ctags</a>.
They all claim to be backwards compatible.
We recommend universal ctags.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tutorial"><a class="header" href="#tutorial">Tutorial</a></h1>
<p>Here is a simple example of using cbmc-viewer.
Running this example requires installing <a href="https://github.com/diffblue/cbmc">CBMC</a>.
Installation on MacOS is just <code>brew install cbmc</code>.
Installation on other operation systems is described on the <a href="https://github.com/diffblue/cbmc/releases/latest">CBMC
release page</a>.</p>
<p>Create a source file <code>main.c</code> containing</p>
<pre><code>#include &lt;stdlib.h&gt;

static int global;

int main() {
  int *ptr = malloc(sizeof(int));

  assert(global &gt; 0);
  assert(*ptr &gt; 0);

  return 0;
}
</code></pre>
<p>and run the commands</p>
<pre><code>goto-cc -o main.goto main.c
cbmc main.goto --trace --xml-ui &gt; result.xml
cbmc main.goto --cover location --xml-ui &gt; coverage.xml
cbmc main.goto --show-properties --xml-ui &gt; property.xml
cbmc-viewer --goto main.goto --result result.xml --coverage coverage.xml --property property.xml --srcdir .
</code></pre>
<p>and open the report created by cbmc-viewer in a web browser with</p>
<pre><code>open report/html/index.html
</code></pre>
<p>What you will see is</p>
<ul>
<li>
<p>A <em>coverage report</em> summarizing what lines of source code were
exercised by cbmc.  In this case, coverage is 100%.  Clicking on <code>main</code>,
you can see the source code for <code>main</code> annotated with coverage data
(all lines are green because all lines were hit).</p>
</li>
<li>
<p>A <em>bug report</em> summarizing what issues cbmc found with the code. In this case,
the bugs are violations of the assertions because, for example, it is possible
that the uninitialized integer allocated on the heap contains a negative value.
For each bug, there is a link to</p>
<ul>
<li>
<p>The line of code where the bug occurred.</p>
</li>
<li>
<p>An error trace showing the steps of the program leading to the bug.
For each step, there a link to the line of code that generated the step,
making it easy to follow the error trace and root cause the bug.</p>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reference-manual"><a class="header" href="#reference-manual">Reference manual</a></h1>
<h2 id="name"><a class="header" href="#name">Name</a></h2>
<p><code>cbmc-viewer</code> - Generate a browsable summary of CBMC results</p>
<h2 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h2>
<pre><code>cbmc-viewer [-h] [--result FILE [FILE ...]]
                 [--coverage FILE [FILE ...]] [--property FILE [FILE ...]]
                 [--srcdir SRCDIR] [--exclude EXCLUDE] [--extensions REGEXP]
                 [--source-method MHD] [--wkdir WKDIR] [--goto GOTO]
                 [--reportdir REPORTDIR] [--json-summary JSON]
                 [--viewer-coverage JSON [JSON ...]]
                 [--viewer-loop JSON [JSON ...]]
                 [--viewer-property JSON [JSON ...]]
                 [--viewer-reachable JSON [JSON ...]]
                 [--viewer-result JSON [JSON ...]]
                 [--viewer-source JSON [JSON ...]]
                 [--viewer-symbol JSON [JSON ...]]
                 [--viewer-trace JSON [JSON ...]] [--verbose] [--debug]
                 [--config JSON] [--version] [--block BLOCK]
                 [--htmldir HTMLDIR] [--srcexclude EXCLUDE]
                 [--blddir BLDDIR] [--storm STORM]
</code></pre>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p>CBMC Viewer generates a browsable summary of CBMC results that makes it
easy to root cause issues found by CBMC.</p>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<h3 id="cbmc-output"><a class="header" href="#cbmc-output">CBMC output</a></h3>
<p>This is the output of <code>cbmc</code> that is summarized by <code>cbmc-viewer</code>.</p>
<p>The output of <code>cbmc</code> can be text, xml, or json.  <code>cbmc</code> outputs text
by default, but <code>cbmc --xml-ui</code> and <code>cbmc --json-ui</code> will output xml
and json instead.  <code>cbmc-viewer</code> can generally accept output in any
form, but xml is strongly preferred.</p>
<p>The output of <code>cbmc-viewer</code> can be a summary of multiple invocations
of <code>cbmc</code>.  For example, after testing one function with <code>cbmc</code> in
multiple configurations, invoking <code>cbmc-viewer</code> with the results of
all of these tests in all of these configurations will generate a
single report summarizing the union of these results.</p>
<p><code>--result FILE [FILE ...]</code></p>
<ul>
<li>The property checking results. A text, xml, or json file containing
the output of <code>cbmc</code>.</li>
</ul>
<p><code>--coverage FILE [FILE ...]</code></p>
<ul>
<li>The coverage checking results. An xml or json file containing the
output of <code>cbmc --cover locations</code>.</li>
</ul>
<p><code>--property FILE [FILE ...]</code></p>
<ul>
<li>The properties checked during property checking. An xml or json
file containing the output of <code>cbmc --show-properties</code>.</li>
</ul>
<h3 id="source-files"><a class="header" href="#source-files">Source files</a></h3>
<p><code>--srcdir SRCDIR</code></p>
<ul>
<li>The root of the source tree.  This is typically the root of the code
repository itself. For best results, the source tree should include
both the project code and the proof code written to facilitate
verification (for example, stubs for functionality not
being tested).  The final report will not link to files outside the
source tree or to symbols defined in files outside the source tree.</li>
</ul>
<p><code>--exclude EXCLUDE</code></p>
<ul>
<li>A regular expression for the paths relative to SRCDIR to exclude from
the list of source files.  This is rarely used.  It is a Python regular
expression matched against the result of os.path.normpath(). The
match is case insensitive.</li>
</ul>
<p><code>--extensions REGEXP</code></p>
<ul>
<li>A regular expression for the file extensions of files to include
in the list of source files.  This is rarely used.  It is a Python regular
expression matched against the result of os.path.splitext(). The
match is case insensitive. (Default: <code>^\.(c|h|inl)$</code>)</li>
</ul>
<p><code>--source-method MHD</code></p>
<ul>
<li>
<p>The method to use to enumerate the list of source files. This is
rarely used.  The default method is generally to use the files
mentioned in the symbol table of the goto binary.  The full set of
methods available is</p>
<ul>
<li><code>find</code>: use the Linux <code>find</code> command in SRCDIR,</li>
<li><code>walk</code>: use the Python <code>walk</code> method in SRCDIR,</li>
<li><code>make</code>: use the <code>make</code> command in the WKDIR to build the goto
binary with the preprocessor and use the files under SRCDIR
mentioned in the preprocessor output, and</li>
<li><code>goto</code>: use the files under SRCDIR mentioned in the symbol table
of the goto binary.</li>
</ul>
<p>The default method is <code>goto</code> if SRCDIR and
WKDIR and GOTO are specified, <code>make</code> if SRCDIR and WKDIR are
specified, <code>walk</code> on Windows, and <code>find</code> otherwise.</p>
</li>
</ul>
<h3 id="goto-binaries"><a class="header" href="#goto-binaries">Goto binaries</a></h3>
<p><code>--wkdir WKDIR</code></p>
<ul>
<li>The working directory.  This is generally the directory in which
<code>goto-cc</code> was invoked to build the goto binary.  It is the working
directory that is mentioned in the source locations in the goto
binary.  It is used to resolve relative paths appearing in source
locations into absolute paths to source files.  Relative paths
appear in source locations only when <code>goto-cc</code> is invoked with
relative paths.  If <code>goto-cc</code> is invoked with absolute paths, paths
in source locations are absolute paths, and this working directory
is not needed.</li>
</ul>
<p><code>--goto GOTO</code></p>
<ul>
<li>The goto binary itself.</li>
</ul>
<h3 id="viewer-output"><a class="header" href="#viewer-output">Viewer output</a></h3>
<p><code>--reportdir REPORTDIR</code></p>
<ul>
<li>The report directory. Write the final report to this
directory. (Default: report)</li>
</ul>
<p><code>--json-summary JSON</code></p>
<ul>
<li>Write summary of key metrics to this json file.</li>
</ul>
<h3 id="viewer-input"><a class="header" href="#viewer-input">Viewer input</a></h3>
<p>JSON files produced by the various make-* scripts.</p>
<p><code>--viewer-coverage JSON [JSON ...]</code></p>
<ul>
<li>Load coverage data from the JSON output of make-coverage. If
multiple files are given, merge multiple data
sets into one.</li>
</ul>
<p><code>--viewer-loop JSON [JSON ...]</code></p>
<ul>
<li>Load loops from the JSON output of make-loop. If multiple files are
given, merge multiple data sets into one.</li>
</ul>
<p><code>--viewer-property JSON [JSON ...]</code></p>
<ul>
<li>Load properties from the JSON output of make-property.  If multiple
files are given, merge multiple data sets into one.</li>
</ul>
<p><code>--viewer-reachable JSON [JSON ...]</code></p>
<ul>
<li>Load reachable functions from the JSON output of make-reachable. If
multiple files are given, merge multiple data sets into one.</li>
</ul>
<p><code>--viewer-result JSON [JSON ...]</code></p>
<ul>
<li>Load results from the JSON output of make-result. If multiple files
are given, merge multiple data sets into one.</li>
</ul>
<p><code>--viewer-source JSON [JSON ...]</code></p>
<ul>
<li>Load sources from the JSON output of make-source. If multiple files
are given, merge multiple data sets into one.</li>
</ul>
<p><code>--viewer-symbol JSON [JSON ...]</code></p>
<ul>
<li>Load symbols from the JSON output of make-symbol. If multiple files
are given, merge multiple data sets into one.</li>
</ul>
<p><code>--viewer-trace JSON [JSON ...]</code></p>
<ul>
<li>Load traces from the JSON output of make-trace. If multiple files
are given, merge multiple data sets into one.</li>
</ul>
<h3 id="other"><a class="header" href="#other">Other</a></h3>
<p><code>--help, -h</code></p>
<p><code>--verbose</code></p>
<ul>
<li>Verbose output.</li>
</ul>
<p><code>--debug</code></p>
<ul>
<li>Debugging output.</li>
</ul>
<p><code>--config JSON</code></p>
<ul>
<li>JSON configuration file. (Default: <code>cbmc-viewer.json</code>)</li>
</ul>
<p><code>--version</code></p>
<ul>
<li>Display version number and exit.</li>
</ul>
<h3 id="deprecated"><a class="header" href="#deprecated">Deprecated:</a></h3>
<p>Options from prior versions now deprecated.</p>
<p><code>--block BLOCK</code></p>
<ul>
<li>Use --coverage instead.</li>
</ul>
<p><code>--htmldir HTMLDIR</code></p>
<ul>
<li>Use --reportdir instead.</li>
</ul>
<p><code>--srcexclude EXCLUDE</code></p>
<ul>
<li>Use --exclude instead.</li>
</ul>
<p><code>--blddir BLDDIR</code></p>
<ul>
<li>Ignored.</li>
</ul>
<p><code>--storm STORM</code></p>
<ul>
<li>Ignored.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cbmc-viewer-resources"><a class="header" href="#cbmc-viewer-resources">CBMC viewer resources</a></h1>
<ul>
<li><a href="https://github.com/model-checking/cbmc-viewer">CBMC viewer</a> GitHub repository</li>
<li><a href="https://github.com/diffblue/cbmc">CBMC</a> GitHub repository</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<p>This training material is a work in progress.  If you have suggestions,
corrections, or questions, contact us by submitting a
<a href="https://github.com/model-checking/cbmc-viewer/issues">GitHub issue</a>.
If you have some training of your own that you would like to contribute,
submit your contributions as a
<a href="https://github.com/model-checking/cbmc-viewer/pulls">GitHub pull request</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
